PLUGIN_DIR="$HOME/.config/sketchybar/plugins"

sketchybar --bar height=32            \
                 blur_radius=0        \
                 position=top         \
                 sticky=off           \
                 margin=10            \
                 padding_left=10      \
                 padding_right=10     \
                 y_offset=8           \
                 color=0xFF1D1D1D     \
                 corner_radius=30

sketchybar --default updates=when_shown                    \
                     drawing=on                            \
                     icon.font="SpaceMono Nerd Font:Bold:17.0"    \
                     icon.color=0xffDECDAD                 \
                     label.font="SpaceMono NF:Bold:14.0"   \
                     label.color=0xffDECDAD                \
                     label.padding_left=4                  \
                     label.padding_right=4                 \
                     icon.padding_left=4                   \
                     icon.padding_right=4

SPACE_ICONS=("" "" "" "" "" "" "" "8" "9" "10")

for i in "${!SPACE_ICONS[@]}"
do
  sid=$(($i+1))
  sketchybar --add space space.$sid left                                 \
             --set space.$sid associated_space=$sid                      \
                             icon=${SPACE_ICONS[i]}                     \
                             icon.padding_left=12                       \
                             icon.padding_right=12                      \
                             background.padding_left=8                  \
                             background.padding_right=8                 \
                             background.color=0xff21282b                \
                             background.corner_radius=10                \
                             background.height=22                       \
                             background.drawing=off                     \
                             label.drawing=off                          \
                             script="$PLUGIN_DIR/space.sh"              \
                             click_script="yabai -m space --focus $sid"
done

sketchybar --add item space_separator left                         \
           --set space_separator icon=                            \
                                 background.padding_left=15        \
                                 background.padding_right=15       \
                                 label.drawing=off                 \

sketchybar --add item front_app center                             \
           --set front_app       script="$PLUGIN_DIR/front_app.sh" \
                                 icon.drawing=off                  \
           --subscribe front_app front_app_switched

sketchybar --add item clock right                        \
           --set clock   update_freq=10                  \
                         script="$PLUGIN_DIR/clock.sh"   \
                                                         \
           --add item battery right                      \
           --set battery script="$PLUGIN_DIR/battery.sh" \
                         update_freq=10                  \
           --subscribe battery system_woke

sketchybar --update

echo "sketchybar configuration loaded.."
