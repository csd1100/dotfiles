#!/usr/bin/env bash

if [ $(uname -s) = 'Darwin' ]; then
	current_volume=$(($(osascript -e 'output volume of (get volume settings)') / 14))
	increase=$(($2 / 14))
	echo $current_volume
	echo $increase
	case $1 in
	+)
		osascript -e "set Volume $(($current_volume + $increase))"
		osascript -e 'output volume of (get volume settings)'
		;;
	-)
		osascript -e "set Volume $(($current_volume - $increase))"
		osascript -e 'output volume of (get volume settings)'
		;;
	*)
		echo "Wrong Argument passed. Expected Argument + / - "
		exit
		;;
	esac
else
	which wpctl &>/dev/null
	if [ $? != 0 ]; then
		echo "wpctl not installed!"
		exit 1
	fi
	case $1 in
	+)
		wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
		wpctl get-volume @DEFAULT_AUDIO_SINK@
		;;
	-)
		wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%-
		wpctl get-volume @DEFAULT_AUDIO_SINK@
		;;
	m)
		wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
		wpctl get-volume @DEFAULT_AUDIO_SINK@
		;;
	*)
		echo "Wrong Argument passed. Expected Argument + / - "
		exit
		;;
	esac

fi
